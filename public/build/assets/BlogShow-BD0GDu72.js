import{c as P,r as J,u as T,a as B,j as s,H as q}from"./app-4X6IU_M5.js";import O from"./NavBar-Btpw-Yoo.js";/* empty css            */import"./proxy-aHMthY0-.js";function L(o){const e=P.c(61),{comment:t,postId:l}=o,[a,H]=J.useState(!1),{auth:c}=T().props;let j;e[0]!==t.id||e[1]!==l?(j={content:"",post_id:l,parent_id:t.id},e[0]=t.id,e[1]=l,e[2]=j):j=e[2];const{data:u,setData:d,post:g,processing:f,reset:h}=B(j);let v;e[3]!==g||e[4]!==h?(v=F=>{F.preventDefault(),g("/comments",{preserveScroll:!0,preserveState:!0,onSuccess:()=>{h(),H(!1)}})},e[3]=g,e[4]=h,e[5]=v):v=e[5];const m=v;let i;e[6]!==c.user||e[7]!==t.id?(i=()=>{c.user&&router.post(route("comments.like",t.id),{},{preserveScroll:!0})},e[6]=c.user,e[7]=t.id,e[8]=i):i=e[8];const b=i;let n;e[9]!==t.id?(n=()=>{confirm("Voulez-vous vraiment supprimer ce commentaire ?")&&router.delete(route("comments.destroy",t.id),{preserveScroll:!0})},e[9]=t.id,e[10]=n):n=e[10];const p=n;let r;e[11]!==t.user.avatar||e[12]!==t.user.initials||e[13]!==t.user.name?(r=t.user.avatar?s.jsx("img",{src:t.user.avatar,alt:t.user.name,className:"w-full h-full rounded-full object-cover"}):t.user.initials,e[11]=t.user.avatar,e[12]=t.user.initials,e[13]=t.user.name,e[14]=r):r=e[14];let x;e[15]!==r?(x=s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-xs font-bold text-white",children:r})}),e[15]=r,e[16]=x):x=e[16];let N;e[17]!==t.user.name?(N=s.jsx("h4",{className:"font-bold text-sm text-white",children:t.user.name}),e[17]=t.user.name,e[18]=N):N=e[18];let E;e[19]!==t.content?(E=s.jsx("p",{className:"text-sm text-gray-300",children:t.content}),e[19]=t.content,e[20]=E):E=e[20];let R;e[21]!==N||e[22]!==E?(R=s.jsxs("div",{className:"bg-gray-800 rounded-2xl px-4 py-2 inline-block",children:[N,E]}),e[21]=N,e[22]=E,e[23]=R):R=e[23];let I;e[24]!==t.created_at?(I=s.jsx("span",{children:t.created_at}),e[24]=t.created_at,e[25]=I):I=e[25];const D=`${t.is_liked?"text-emerald-500 font-bold":"hover:underline"}`;let z;e[26]!==D||e[27]!==b?(z=s.jsx("button",{onClick:b,className:D,children:"J'aime"}),e[26]=D,e[27]=b,e[28]=z):z=e[28];let y;e[29]!==a?(y=s.jsx("button",{onClick:()=>H(!a),className:"hover:underline",children:"R√©pondre"}),e[29]=a,e[30]=y):y=e[30];let _;e[31]!==c.user||e[32]!==t.user.id||e[33]!==p?(_=c.user&&c.user.id===t.user.id&&s.jsx("button",{onClick:p,className:"text-red-500 hover:underline",children:"Supprimer"}),e[31]=c.user,e[32]=t.user.id,e[33]=p,e[34]=_):_=e[34];let w;e[35]!==t.likes_count?(w=t.likes_count>0&&s.jsxs("span",{className:"flex items-center gap-1 text-gray-400 font-normal",children:["üëç ",t.likes_count]}),e[35]=t.likes_count,e[36]=w):w=e[36];let S;e[37]!==I||e[38]!==z||e[39]!==y||e[40]!==_||e[41]!==w?(S=s.jsxs("div",{className:"flex items-center gap-4 mt-1 ml-2 text-xs text-gray-500 font-semibold",children:[I,z,y,_,w]}),e[37]=I,e[38]=z,e[39]=y,e[40]=_,e[41]=w,e[42]=S):S=e[42];let k;e[43]!==t.user.name||e[44]!==u||e[45]!==f||e[46]!==d||e[47]!==a||e[48]!==m?(k=a&&s.jsxs("form",{onSubmit:m,className:"mt-3 flex gap-2",children:[s.jsx("input",{type:"text",value:u.content,onChange:F=>d("content",F.target.value),placeholder:`R√©pondre √† ${t.user.name}...`,className:"flex-grow bg-gray-800 border-none rounded-full px-4 py-2 text-sm text-white focus:ring-1 focus:ring-emerald-500",autoFocus:!0}),s.jsx("button",{type:"submit",disabled:f||!u.content.trim(),className:"text-emerald-500 font-bold text-sm disabled:opacity-50",children:"POSTER"})]}),e[43]=t.user.name,e[44]=u,e[45]=f,e[46]=d,e[47]=a,e[48]=m,e[49]=k):k=e[49];let C;e[50]!==t.replies||e[51]!==l?(C=t.replies&&t.replies.length>0&&s.jsx("div",{className:"mt-3 ml-2 pl-3 border-l-2 border-gray-800",children:t.replies.map(F=>s.jsx(L,{comment:F,postId:l},F.id))}),e[50]=t.replies,e[51]=l,e[52]=C):C=e[52];let $;e[53]!==S||e[54]!==k||e[55]!==C||e[56]!==R?($=s.jsxs("div",{className:"flex-grow",children:[R,S,k,C]}),e[53]=S,e[54]=k,e[55]=C,e[56]=R,e[57]=$):$=e[57];let A;return e[58]!==$||e[59]!==x?(A=s.jsxs("div",{className:"flex gap-3 mb-4",children:[x,$]}),e[58]=$,e[59]=x,e[60]=A):A=e[60],A}function U(o){const e=P.c(25),{comments:t,postId:l}=o,{auth:a}=T().props;let H;e[0]!==l?(H={content:"",post_id:l,parent_id:null},e[0]=l,e[1]=H):H=e[1];const{data:c,setData:j,post:u,processing:d,reset:g,errors:f}=B(H);let h;e[2]!==u||e[3]!==g?(h=r=>{r.preventDefault(),u("/comments",{preserveScroll:!0,preserveState:!0,onSuccess:()=>{g()},onError:V})},e[2]=u,e[3]=g,e[4]=h):h=e[4];const v=h;let m;e[5]!==t.length?(m=s.jsxs("h3",{className:"text-xl font-bold text-white mb-6",children:["Commentaires (",t.length,")"]}),e[5]=t.length,e[6]=m):m=e[6];let i;e[7]!==a.user||e[8]!==c||e[9]!==f||e[10]!==d||e[11]!==j||e[12]!==v?(i=a.user?s.jsxs("div",{className:"flex gap-3 mb-8",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-700 flex-shrink-0 flex items-center justify-center text-xs font-bold text-white",children:a.user.profile_photo_url?s.jsx("img",{src:a.user.profile_photo_url,className:"w-full h-full rounded-full object-cover",alt:a.user.name}):a.user.name.substring(0,2).toUpperCase()}),s.jsxs("form",{onSubmit:v,className:"flex-grow",children:[s.jsx("textarea",{value:c.content,onChange:r=>j("content",r.target.value),placeholder:"√âcrivez un commentaire...",className:"w-full bg-gray-900 border border-gray-800 rounded-xl p-3 text-white text-sm focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 resize-none h-20",disabled:d}),f.content&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:f.content}),s.jsx("div",{className:"flex justify-end mt-2",children:s.jsx("button",{type:"submit",disabled:d||!c.content.trim(),className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-bold rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Envoi...":"Commenter"})})]})]}):s.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 mb-8 text-center",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Connectez-vous pour participer √† la discussion."}),s.jsx("a",{href:"/login",className:"text-emerald-400 hover:underline text-sm font-bold mt-2 inline-block",children:"Se connecter"})]}),e[7]=a.user,e[8]=c,e[9]=f,e[10]=d,e[11]=j,e[12]=v,e[13]=i):i=e[13];let b;if(e[14]!==t||e[15]!==l){let r;e[17]!==l?(r=x=>s.jsx(L,{comment:x,postId:l},x.id),e[17]=l,e[18]=r):r=e[18],b=t.map(r),e[14]=t,e[15]=l,e[16]=b}else b=e[16];let n;e[19]!==b?(n=s.jsx("div",{className:"space-y-6",children:b}),e[19]=b,e[20]=n):n=e[20];let p;return e[21]!==m||e[22]!==i||e[23]!==n?(p=s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-800",children:[m,i,n]}),e[21]=m,e[22]=i,e[23]=n,e[24]=p):p=e[24],p}function V(o){console.log("Erreurs :",o)}function Z(o){const e=P.c(65),{post:t}=o;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0];const[a,H]=J.useState(l);let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{const F=document.querySelectorAll(".rich-content h2, .rich-content h3"),M=Array.from(F).map(K);H(M)},e[1]=c):c=e[1];let j;e[2]!==t.content?(j=[t.content],e[2]=t.content,e[3]=j):j=e[3],J.useEffect(c,j);let u;e[4]!==t.excerpt?(u=s.jsx("meta",{name:"description",content:t.excerpt}),e[4]=t.excerpt,e[5]=u):u=e[5];let d;e[6]!==t.title?(d=s.jsx("meta",{property:"og:title",content:t.title}),e[6]=t.title,e[7]=d):d=e[7];let g;e[8]!==t.excerpt?(g=s.jsx("meta",{property:"og:description",content:t.excerpt}),e[8]=t.excerpt,e[9]=g):g=e[9];let f;e[10]!==t.image_url?(f=t.image_url&&s.jsx("meta",{property:"og:image",content:t.image_url}),e[10]=t.image_url,e[11]=f):f=e[11];let h;e[12]!==t.title||e[13]!==u||e[14]!==d||e[15]!==g||e[16]!==f?(h=s.jsxs(q,{title:t.title,children:[u,d,g,f]}),e[12]=t.title,e[13]=u,e[14]=d,e[15]=g,e[16]=f,e[17]=h):h=e[17];let v;e[18]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(O,{}),e[18]=v):v=e[18];let m;e[19]!==t.image_url||e[20]!==t.title?(m=t.image_url&&s.jsxs("div",{className:"relative w-full h-[50vh] md:h-[70vh] overflow-hidden",children:[s.jsx("img",{src:t.image_url,alt:t.title,className:"absolute inset-0 w-full h-full object-cover brightness-75"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-5 pb-10 md:px-12 md:pb-16",children:s.jsx("h1",{className:"text-3xl md:text-5xl lg:text-6xl font-bold leading-tight max-w-5xl",children:t.title})})]}),e[19]=t.image_url,e[20]=t.title,e[21]=m):m=e[21];let i;e[22]!==t.author?(i=s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-emerald-600 to-emerald-800 flex items-center justify-center text-white font-bold text-lg overflow-hidden border-2 border-emerald-500/40",children:t.author?.avatar?s.jsx("img",{src:t.author.avatar,alt:t.author.name,className:"w-full h-full object-cover"}):s.jsx("span",{children:t.author?.initials||"NJ"})}),e[22]=t.author,e[23]=i):i=e[23];const b=t.author?.name||"Njimolux";let n;e[24]!==b?(n=s.jsx("div",{className:"font-medium text-lg",children:b}),e[24]=b,e[25]=n):n=e[25];let p;e[26]!==t.category||e[27]!==t.published_at?(p=s.jsxs("div",{className:"text-sm text-gray-400",children:[t.published_at," ‚Ä¢ ",t.category]}),e[26]=t.category,e[27]=t.published_at,e[28]=p):p=e[28];let r;e[29]!==n||e[30]!==p?(r=s.jsxs("div",{children:[n,p]}),e[29]=n,e[30]=p,e[31]=r):r=e[31];let x;e[32]!==i||e[33]!==r?(x=s.jsxs("div",{className:"flex items-center gap-4 mb-10",children:[i,r]}),e[32]=i,e[33]=r,e[34]=x):x=e[34];let N;e[35]!==t.content?(N=s.jsx("article",{className:"rich-content",children:s.jsx("div",{dangerouslySetInnerHTML:{__html:t.content}})}),e[35]=t.content,e[36]=N):N=e[36];let E;e[37]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsxs("button",{className:"flex items-center gap-2 hover:text-emerald-400 transition-colors",children:[s.jsx("span",{children:"üëç"})," J'aime"]}),e[37]=E):E=e[37];let R;e[38]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsxs("button",{className:"flex items-center gap-2 hover:text-emerald-400 transition-colors",children:[s.jsx("span",{children:"üí¨"})," Commenter"]}),e[38]=R):R=e[38];let I;e[39]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsxs("div",{className:"mt-16 pt-10 border-t border-gray-800 flex flex-wrap gap-6 text-gray-400",children:[E,R,s.jsxs("button",{className:"flex items-center gap-2 hover:text-emerald-400 transition-colors",children:[s.jsx("span",{children:"‚ÜóÔ∏è"})," Partager"]})]}),e[39]=I):I=e[39];let D;e[40]!==x||e[41]!==N?(D=s.jsxs("main",{className:"relative pt-10 md:pt-16 pb-20",children:[x,N,I]}),e[40]=x,e[41]=N,e[42]=D):D=e[42];let z;e[43]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsxs("h3",{className:"text-lg font-semibold text-emerald-400 mb-5 flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:"‚â°"})," Sommaire"]}),e[43]=z):z=e[43];let y;e[44]!==a?(y=a.length===0?s.jsx("p",{className:"text-gray-500 italic text-sm",children:"Aucun titre d√©tect√©"}):a.map(G),e[44]=a,e[45]=y):y=e[45];let _;e[46]!==y?(_=s.jsx("aside",{className:"hidden lg:block",children:s.jsx("div",{className:"sticky top-24",children:s.jsxs("div",{className:"bg-gray-900/60 backdrop-blur-md border border-gray-800 rounded-xl p-6",children:[z,s.jsx("nav",{className:"text-sm space-y-2.5 max-h-[70vh] overflow-y-auto pr-2 custom-scrollbar",children:y})]})})}),e[46]=y,e[47]=_):_=e[47];let w;e[48]!==D||e[49]!==_?(w=s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_280px] gap-10 xl:gap-16",children:[D,_]}),e[48]=D,e[49]=_,e[50]=w):w=e[50];let S;e[51]!==t.comments?(S=t.comments||[],e[51]=t.comments,e[52]=S):S=e[52];let k;e[53]!==t.id||e[54]!==S?(k=s.jsx("div",{className:"max-w-4xl mx-auto mt-16 pt-12 border-t border-gray-800",children:s.jsx(U,{comments:S,postId:t.id})}),e[53]=t.id,e[54]=S,e[55]=k):k=e[55];let C;e[56]!==w||e[57]!==k?(C=s.jsxs("div",{className:"relative mx-auto max-w-[1400px] px-5 md:px-8 lg:px-12 -mt-16 md:-mt-24",children:[w,k]}),e[56]=w,e[57]=k,e[58]=C):C=e[58];let $;e[59]!==m||e[60]!==C?($=s.jsx("div",{className:"min-h-screen bg-black text-white",children:s.jsxs("div",{className:"relative",children:[m,C]})}),e[59]=m,e[60]=C,e[61]=$):$=e[61];let A;return e[62]!==$||e[63]!==h?(A=s.jsxs(s.Fragment,{children:[h,v,$]}),e[62]=$,e[63]=h,e[64]=A):A=e[64],A}function G(o){return s.jsx("a",{href:`#${o.id}`,className:`block transition-all duration-200 hover:text-emerald-400 ${o.level===3?"pl-5 text-gray-400":"font-medium text-gray-200"} hover:translate-x-1`,children:o.text},o.id)}function K(o){const e=o.tagName==="H2"?2:3,t=o.textContent||"",l=o.id||`heading-${Math.random().toString(36).substr(2,9)}`;return o.id=l,{id:l,text:t,level:e}}export{Z as default};
